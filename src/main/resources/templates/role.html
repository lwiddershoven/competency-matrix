{#include layout title=role.name}
    {#content}
        <nav class="breadcrumb">
            <a href="/">Home</a> >
            <a href="/matrix">Competency Matrix</a> >
            <span>{role.name}</span>
        </nav>

        <hgroup>
            <h1>{role.name}</h1>
            <p>{role.description}</p>
        </hgroup>

        {#if nextRoles && nextRoles.size() > 0}
        <section>
            <h3>Career Progression</h3>
            <p>This role can progress to:</p>
            <div class="next-roles-compact">
                {#for nextRole in nextRoles}
                <div class="progression-item">
                    <div class="role-progressions">
                        <a href="/roles/{nextRole.id}" class="next-role-link">{nextRole.name}</a>
                    </div>
                    <div class="comparison-links">
                        <a href="/compare?from={role.id}&to={nextRole.id}"
                           class="outline"
                           style="padding: 0.25rem 0.5rem; font-size: 0.75rem;">
                            Compare with {nextRole.name}
                        </a>
                    </div>
                </div>
                {/for}
            </div>
        </section>
        {/if}

        {#if previousRoles && previousRoles.size() > 0}
        <section>
            <h4>Comes from:</h4>
            <div class="next-roles">
                {#for prevRole in previousRoles}
                <a href="/roles/{prevRole.id}"
                   class="outline"
                   style="padding: 0.5rem 1rem; font-size: 0.875rem;">{prevRole.name}</a>
                {/for}
            </div>
        </section>
        {/if}

        <hr>

        <section>
            <h2>Required Competencies</h2>

            <div id="categories-container"
                 hx-get="/roles/{role.id}/categories"
                 hx-trigger="load"
                 hx-swap="innerHTML">
                <p aria-busy="true">Loading competencies...</p>
            </div>
        </section>
    {/content}
{/include}
