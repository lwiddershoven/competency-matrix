<table class="comparison-table">
    <thead>
        <tr>
            <th>Skill</th>
            <th>{fromRole.name}</th>
            <th>{toRole.name}</th>
            <th>Change</th>
        </tr>
    </thead>
    <tbody>
        {#for comparison in comparisons}
        <tr class="{#if comparison.hasChanged()}comparison-changed{/if}">
            <td class="skill-name">
                <small style="color: var(--pico-muted-color);">{comparison.category.name}</small><br>
                <span hx-get="/roles/{toRole.id}/skills/{comparison.skill.id}"
                      hx-target="#skill-modal-content"
                      hx-swap="innerHTML"
                      style="cursor: pointer; text-decoration: underline;">{comparison.skill.name}</span>
            </td>
            <td>
                {#if comparison.fromLevel != null}
                <span class="level-badge level-{comparison.fromLevel.name().toLowerCase()}"
                      hx-get="/roles/{fromRole.id}/skills/{comparison.skill.id}"
                      hx-target="#skill-modal-content"
                      hx-swap="innerHTML"
                      style="cursor: pointer;">{comparison.fromLevel.displayName}</span>
                {#else}
                <span>-</span>
                {/if}
            </td>
            <td>
                {#if comparison.toLevel != null}
                <span class="level-badge level-{comparison.toLevel.name().toLowerCase()}"
                      hx-get="/roles/{toRole.id}/skills/{comparison.skill.id}"
                      hx-target="#skill-modal-content"
                      hx-swap="innerHTML"
                      style="cursor: pointer;">{comparison.toLevel.displayName}</span>
                {#else}
                <span>-</span>
                {/if}
            </td>
            <td>
                {#if comparison.isNew()}
                <span class="comparison-new">New</span>
                {#else if comparison.isUpgrade()}
                <span class="comparison-upgrade">Upgrade</span>
                {#else if comparison.isDowngrade() && !comparison.isRemoved()}
                <span class="comparison-downgrade">Downgrade</span>
                {#else if comparison.isRemoved()}
                <span style="color: var(--pico-muted-color);">Removed</span>
                {#else}
                <span>-</span>
                {/if}
            </td>
        </tr>
        {/for}
    </tbody>
</table>

{#if comparisons.isEmpty()}
<p>No skills to compare between these roles.</p>
{/if}
