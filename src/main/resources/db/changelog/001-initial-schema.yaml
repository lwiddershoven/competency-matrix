databaseChangeLog:
  - changeSet:
      id: 001-create-competency-category
      author: leonw
      changes:
        - createTable:
            tableName: competency_category
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: display_order
                  type: integer
                  defaultValueNumeric: 0
                  constraints:
                    nullable: false

  - changeSet:
      id: 002-create-role
      author: leonw
      changes:
        - createTable:
            tableName: role
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: description
                  type: text

  - changeSet:
      id: 003-create-skill
      author: leonw
      changes:
        - createTable:
            tableName: skill
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: varchar(100)
                  constraints:
                    nullable: false
              - column:
                  name: category_id
                  type: integer
                  constraints:
                    nullable: false
                    foreignKeyName: fk_skill_category
                    references: competency_category(id)
              - column:
                  name: basic_description
                  type: text
              - column:
                  name: decent_description
                  type: text
              - column:
                  name: good_description
                  type: text
              - column:
                  name: excellent_description
                  type: text
        - addUniqueConstraint:
            tableName: skill
            columnNames: name, category_id
            constraintName: uk_skill_name_category

  - changeSet:
      id: 004-create-role-skill-requirement
      author: leonw
      changes:
        - createTable:
            tableName: role_skill_requirement
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: role_id
                  type: integer
                  constraints:
                    nullable: false
                    foreignKeyName: fk_role_skill_role
                    references: role(id)
              - column:
                  name: skill_id
                  type: integer
                  constraints:
                    nullable: false
                    foreignKeyName: fk_role_skill_skill
                    references: skill(id)
              - column:
                  name: required_level
                  type: varchar(20)
                  constraints:
                    nullable: false
        - addUniqueConstraint:
            tableName: role_skill_requirement
            columnNames: role_id, skill_id
            constraintName: uk_role_skill

  - changeSet:
      id: 005-create-role-progression
      author: leonw
      changes:
        - createTable:
            tableName: role_progression
            columns:
              - column:
                  name: id
                  type: integer
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: from_role_id
                  type: integer
                  constraints:
                    nullable: false
                    foreignKeyName: fk_progression_from_role
                    references: role(id)
              - column:
                  name: to_role_id
                  type: integer
                  constraints:
                    nullable: false
                    foreignKeyName: fk_progression_to_role
                    references: role(id)
        - addUniqueConstraint:
            tableName: role_progression
            columnNames: from_role_id, to_role_id
            constraintName: uk_role_progression
