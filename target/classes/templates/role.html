<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:hx="http://www.w3.org/1999/xhtml"
      th:replace="~{layout :: layout(title=${role.name}, content=~{::main-content})}">
<body>
    <div th:fragment="main-content">
        <nav class="breadcrumb">
            <a th:href="@{/}">Home</a> &gt;
            <span th:text="${role.name}">Role Name</span>
        </nav>

        <hgroup>
            <h1 th:text="${role.name}">Role Name</h1>
            <p th:text="${role.description}">Role description</p>
        </hgroup>

        <section th:if="${not #lists.isEmpty(nextRoles)}">
            <h3>Career Progression</h3>
            <p>This role can progress to:</p>
            <div class="next-roles">
                <a th:each="nextRole : ${nextRoles}"
                   th:href="@{/roles/{id}(id=${nextRole.id})}"
                   class="next-role-link"
                   th:text="${nextRole.name}">Next Role</a>
                <a th:each="nextRole : ${nextRoles}"
                   th:href="@{/compare(from=${role.id}, to=${nextRole.id})}"
                   class="outline"
                   style="padding: 0.5rem 1rem; font-size: 0.875rem;">
                    Compare with <span th:text="${nextRole.name}">Next Role</span>
                </a>
            </div>
        </section>

        <section th:if="${not #lists.isEmpty(previousRoles)}">
            <h4>Comes from:</h4>
            <div class="next-roles">
                <a th:each="prevRole : ${previousRoles}"
                   th:href="@{/roles/{id}(id=${prevRole.id})}"
                   class="outline"
                   style="padding: 0.5rem 1rem; font-size: 0.875rem;"
                   th:text="${prevRole.name}">Previous Role</a>
            </div>
        </section>

        <hr>

        <section>
            <h2>Required Competencies</h2>

            <div id="categories-container"
                 hx:get="@{/roles/{id}/categories(id=${role.id})}"
                 hx-trigger="load"
                 hx-swap="innerHTML">
                <p aria-busy="true">Loading competencies...</p>
            </div>
        </section>
    </div>
</body>
</html>
